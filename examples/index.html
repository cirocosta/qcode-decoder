<!DOCTYPE html>
<html>
	<head>
		<title>QRCode Decoder</title>
	</head>
	<body>

	<canvas width="400" height="400" style="display: none"></canvas>
	<video autoplay></video>
	<button id="reset">Reset</button>

	<div id="camera-selector">
		<button id="user">Front Camera</button>
		<button id="environment">Back Camera</button>
	</div>

	<script src="../build/js/jsqrcode.min.js"></script>
	<script src="../src/qcode-decoder.js"></script>
	<script type="text/javascript">
		var qr = new QRCodeDecoder();

		if (qr.isCanvasSupported() || qr.hasGetUserMedia()) {
		  qr.prepareCanvas(document.querySelector('canvas'), 800,600);
		  qr.setDecoderCallback(function (a) {
		    console.log(a);
		  });
		}

		var videoElem = document.querySelector('video');

		qr.prepareVideo(videoElem, function () {
			console.log("error");
		});

		document.getElementById('reset').onclick = function () {
		  qr.prepareVideo(videoElem);
		};

		document.getElementById('user').onclick = function () {
			qr.prepareVideo(videoElem, 'user');
		};
		document.getElementById('environment').onclick = function () {
			qr.prepareVideo(videoElem, 'environment', function (e) {
				console.log("error: ", e);
			});
		};

	</script>
</body>
</html>
